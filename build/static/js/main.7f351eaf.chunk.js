(this.webpackJsonpdrawing=this.webpackJsonpdrawing||[]).push([[0],{208:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(21),i=n.n(r),s=n(269),o=n(15),l=n(247),u=n(275),j=n(272),d=n(13),b=n.n(d),O=n(18),m=n(16),f=n(8),h=n(9);n(123),n(210);h.a.initializeApp({apiKey:"AIzaSyAI7yPnV5DiOAEgW0kGRhh9NsuePU3gmU4",authDomain:"drawing-b8a00.firebaseapp.com",projectId:"drawing-b8a00",storageBucket:"drawing-b8a00.appspot.com",messagingSenderId:"563652193074",appId:"1:563652193074:web:134deadd221d5ceed4c52b"});var x=h.a,p=h.a.firestore(),g=h.a.storage(),v=n(54),C=n(252),y=n(253),w=n(254),k=n(249),N=n(251),S=n(277),F=n(65),P=n(1),E=Object(l.a)((function(){return Object(u.a)({tableRow:{height:"calc(((100vh - 180px) * 0.95) / 28"}})})),T=function(e){var t=e.message,n=void 0===t?null:t,c=E();return Object(P.jsx)(P.Fragment,{children:n?Object(P.jsxs)(k.a,{className:c.tableRow,children:[Object(P.jsx)(N.a,{align:"left",width:"100px",children:n.photoUrl&&n?Object(P.jsx)(S.a,{src:n.photoUrl}):Object(P.jsx)(S.a,{children:"N"})}),Object(P.jsx)(N.a,{align:"left",children:Object(P.jsx)(F.a,{children:n.message})})]}):null})},I=function(e){var t=e.message;return Object(P.jsx)(T,{message:t})},R=Object(l.a)((function(){return Object(u.a)({tableContainer:{maxHeight:"100%",gridRow:4,gridColumn:2},table:{},tableBody:{textAlign:"left"}})})),U=function(e){var t=R(),n=e.messages,c=void 0===n?null:n;return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(C.a,{className:t.tableContainer,children:Object(P.jsx)(y.a,{className:t.table,stickyHeader:!0,children:Object(P.jsx)(w.a,{className:t.tableBody,children:c?Object(v.a)(Array(c.length)).map((function(e,t){return Object(P.jsx)(I,{message:c[t]},"dispCell_".concat(t))})):null})})})})},M=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e,t=!1,n=function(){var e=Object(m.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.collection("messages"),e.next=3,n.orderBy("createdAt","desc").limit(15).get().then((function(e){var n=[];e.forEach((function(e){n.push(Object(O.a)({},e.data()))})),t||a(n.reverse())}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e=function t(){return n(),window.setTimeout((function(){e=t()}),1e3)}(),function(){t=!0,clearTimeout(e)}}),[a]),Object(P.jsx)(U,{messages:n})},D=n(271),A=n(255),K=Object(l.a)((function(e){return Object(u.a)({input:{gridRow:2,gridColumn:2},buttonBox:{display:"flex",justifyContent:"center",alignItems:"center",gridRow:2,gridColumn:3},button:{width:"50%",height:"75%",display:"block",backgroundColor:"".concat(e.palette.primary)}})})),B=function(e){var t=K(),n=e.handleContentChange,c=void 0===n?function(){}:n,a=e.submitError,r=void 0!==a&&a,i=e.message,s=void 0===i?"":i,o=e.handleOnSubmit,l=void 0===o?function(){}:o;return Object(P.jsxs)(P.Fragment,{children:[r?Object(P.jsx)(D.a,{className:t.input,onChange:c,margin:"dense",id:"message",label:"\u5185\u5bb9",fullWidth:!0,autoFocus:!0,multiline:!0,rows:3,value:s,error:!0,helperText:"\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093"}):Object(P.jsx)(D.a,{className:t.input,onChange:c,margin:"dense",id:"message",label:"\u5185\u5bb9",fullWidth:!0,autoFocus:!0,multiline:!0,rows:3,value:s}),Object(P.jsx)(j.a,{className:t.buttonBox,children:Object(P.jsx)(A.a,{onClick:l,className:t.button,variant:"outlined",color:"primary",children:"\u9001\u4fe1"})})]})},z=Object(c.createContext)({auth:null,db:null}),q=Object(c.createContext)({user:null,credential:null,setCredential:function(){}}),W=function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(f.a)(r,2),s=i[0],o=i[1],l=Object(c.useContext)(q).user;return Object(P.jsx)(B,{handleContentChange:function(e){o(!1),a(e.target.value)},submitError:s,message:n,handleOnSubmit:function(){""!==n&&l?(p.collection("messages").doc().set({message:n,displayName:l.displayName,screenName:l.screenName,photoUrl:l.photoUrl,createdAt:x.firestore.FieldValue.serverTimestamp()}),a("")):o(!0)}})},V=n(33),G=n.n(V),L=n(136),_=n(274),H=n(256),J=n(257),Q=n(258),X=n(259),Y=function(e){var t=e.infOpen,n=void 0!==t&&t,c=e.title,a=void 0===c?"":c,r=e.msgElm,i=void 0===r?Object(P.jsx)(P.Fragment,{}):r,s=e.clickOK,o=void 0===s?function(){}:s,l=e.txtOK,u=void 0===l?"\u4e86 \u89e3":l;return Object(P.jsxs)(_.a,{open:n,children:[Object(P.jsx)(H.a,{children:a}),Object(P.jsx)(J.a,{children:Object(P.jsx)(Q.a,{children:i})}),Object(P.jsx)(X.a,{children:Object(P.jsx)(A.a,{onClick:o,color:"primary",autoFocus:!0,children:u})})]})},Z=function(e){var t=e.infOpen,n=e.title,c=e.msg,a=e.clickOK,r=e.txtOK;return Object(P.jsx)(Y,{infOpen:t,title:n,msgElm:function(e){var t=e.split("\n");return Object(P.jsx)(P.Fragment,{children:t.map((function(e,t){return Object(P.jsx)(F.a,{component:"span",children:e},"msgElm_".concat(t))}))})}(c),clickOK:a,txtOK:r})},$=Object(l.a)((function(){return Object(u.a)({clockStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",gridColumn:3,gridRow:1},clockStyleDanger:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",color:"#ff1744",gridColumn:3,gridRow:1}})})),ee=function(e){var t=e.tmMinutes,n=void 0===t?"":t,c=e.tmSeconds,a=void 0===c?"":c,r=e.danger,i=void 0!==r&&r,s=e.isEnd,o=void 0!==s&&s,l=e.clickOK,u=void 0===l?function(){}:l,j=$();return Object(P.jsxs)(P.Fragment,{children:[i?Object(P.jsx)(L.a,{className:j.clockStyleDanger,children:n&&a?n+"\u5206"+a+"\u79d2":null}):Object(P.jsx)(L.a,{className:j.clockStyle,children:n&&a?n+"\u5206"+a+"\u79d2":null}),Object(P.jsx)(Z,{infOpen:o,title:"\u6642\u9593\u7d42\u4e86\u3067\u3059",msg:"\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002\u6b21\u306e\u753b\u9762\u3067\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044",clickOK:u})]})},te=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(f.a)(r,2),s=i[0],l=i[1],u=Object(c.useState)(""),j=Object(f.a)(u,2),d=j[0],O=j[1],h=Object(c.useState)(!1),x=Object(f.a)(h,2),p=x[0],g=x[1],v=Object(c.useState)(!1),C=Object(f.a)(v,2),y=C[0],w=C[1],k=Object(o.g)();Object(c.useEffect)((function(){G()().startOf("day");var e=G()().add(15,"seconds");a(e)}),[a]);var N=Object(c.useCallback)(Object(m.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=G()(),n&&(c=n.diff(t,"second"),l(String(Math.floor(c/60))),O(String(c%60)),0===c&&w(!0),Math.floor(c/60)<=5&&g(!0));case 2:case"end":return e.stop()}}),e)}))),[n]);Object(c.useEffect)((function(){if(!y){var e=setInterval(N,500);return N(),function(){clearInterval(e)}}}),[N,y]);var S=Object(c.useCallback)((function(){k.push("/upload")}),[]);return Object(P.jsx)(ee,{tmMinutes:s,tmSeconds:d,danger:p,isEnd:y,clickOK:S})},ne=Object(l.a)((function(){return Object(u.a)({dispTheme:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",gridColumn:1,gridRow:1}})})),ce=function(e){var t=e.drawTheme,n=void 0===t?"":t,c=ne();return Object(P.jsx)(L.a,{className:c.dispTheme,children:n})},ae=function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){a("\u6e96\u5099\u4e2d")}),[]),Object(P.jsx)(ce,{drawTheme:n})},re=Object(l.a)((function(e){return Object(u.a)({timer:{gridRow:2,gridColumn:2,display:"grid",gridTemplateColumns:"68% 4% 28%",gridTemplateRows:"100%"},display:{gridRow:4,gridColumn:2},writingSpace:{display:"grid",gridTemplateRows:"2% 96% 2%",gridTemplateColumns:"2% 68% 28% 2%",width:"100%",gridRow:6,gridColumn:2,borderColor:"".concat(e.palette.primary)}})})),ie=function(){var e=re();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(j.a,{className:e.timer,children:[Object(P.jsx)(te,{}),Object(P.jsx)(ae,{})]}),Object(P.jsx)(j.a,{className:e.display,children:Object(P.jsx)(M,{})}),Object(P.jsx)(j.a,{className:e.writingSpace,children:Object(P.jsx)(W,{})})]})},se=function(){return Object(P.jsx)(ie,{})},oe=Object(l.a)((function(){return Object(u.a)({root:{display:"grid",gridTemplateRows:"3% 10% 3% 70% 3% 10% 1%",gridTemplateColumns:"10% 80% 10%",height:"calc(100vh - 70px)"}})})),le=function(){var e=oe();return Object(P.jsx)(j.a,{className:e.root,children:Object(P.jsx)(se,{})})},ue=Object(l.a)((function(){return Object(u.a)({clockStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em"},clockStyleDanger:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",color:"#ff1744"}})})),je=function(e){var t=e.tmMinutes,n=void 0===t?"":t,c=e.tmSeconds,a=void 0===c?"":c,r=e.danger,i=void 0!==r&&r,s=e.isEnd,o=void 0!==s&&s,l=e.clickOK,u=void 0===l?function(){}:l,j=ue();return Object(P.jsxs)(P.Fragment,{children:[i?Object(P.jsx)(L.a,{className:j.clockStyleDanger,children:n&&a?n+"\u5206"+a+"\u79d2":null}):Object(P.jsx)(L.a,{className:j.clockStyle,children:n&&a?n+"\u5206"+a+"\u79d2":null}),o?Object(P.jsx)(Z,{infOpen:o,title:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6642\u9593\u306e\u7d42\u4e86\u3067\u3059",msg:"\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002\u307e\u305f\u306e\u53c2\u52a0\u3092\u304a\u5f85\u3061\u3057\u3066\u304a\u308a\u307e\u3059\u3002",clickOK:u}):null]})},de=function(e){var t=e.setTimerEnd,n=Object(c.useState)(null),a=Object(f.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(""),l=Object(f.a)(s,2),u=l[0],j=l[1],d=Object(c.useState)(""),O=Object(f.a)(d,2),h=O[0],x=O[1],p=Object(c.useState)(!1),g=Object(f.a)(p,2),v=g[0],C=g[1],y=Object(c.useState)(!1),w=Object(f.a)(y,2),k=w[0],N=w[1],S=Object(o.g)();Object(c.useEffect)((function(){G()().startOf("day");var e=G()().add(30,"seconds");i(e)}),[i]);var F=Object(c.useCallback)(Object(m.a)(b.a.mark((function e(){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=G()(),r&&(c=r.diff(n,"second"),j(String(Math.floor(c/60))),x(String(c%60)),0===c&&(t(!0),N(!0)),Math.floor(c/60)<1&&C(!0));case 2:case"end":return e.stop()}}),e)}))),[r]);Object(c.useEffect)((function(){if(!k){var e=setInterval(F,500);return F(),function(){clearInterval(e)}}}),[F,k]);var E=Object(c.useCallback)((function(){S.push("/")}),[]);return Object(P.jsx)(je,{tmMinutes:u,tmSeconds:h,danger:v,isEnd:k,clickOK:E})},be=n(260),Oe=n(86),me=n.n(Oe),fe=function(e){var t=e.cfmOpen,n=void 0!==t&&t,c=e.title,a=void 0===c?"":c,r=e.msgElm,i=void 0===r?Object(P.jsx)(P.Fragment,{}):r,s=e.clickOK,o=void 0===s?function(){}:s,l=e.clickNG,u=void 0===l?function(){}:l,j=e.txtOK,d=void 0===j?"\u4e86 \u89e3":j,b=e.txtNG,O=void 0===b?"\u53d6 \u6d88":b;return Object(P.jsxs)(_.a,{open:n,children:[Object(P.jsx)(H.a,{children:a}),Object(P.jsx)(J.a,{children:Object(P.jsx)(Q.a,{children:i})}),Object(P.jsxs)(X.a,{children:[Object(P.jsx)(A.a,{onClick:o,color:"primary",autoFocus:!0,children:d}),Object(P.jsx)(A.a,{onClick:u,color:"primary",autoFocus:!0,children:O})]})]})},he=function(e){var t=e.cfmOpen,n=e.title,c=e.msg,a=e.clickOK,r=e.clickNG,i=e.txtOK,s=e.txtNG;return Object(P.jsx)(fe,{cfmOpen:t,title:n,msgElm:function(e){var t=e.split("\n");return Object(P.jsx)(P.Fragment,{children:t.map((function(e,t){return Object(P.jsx)(F.a,{component:"div",children:e},"msgElm_".concat(t))}))})}(c),clickOK:a,clickNG:r,txtOK:i,txtNG:s})},xe=Object(l.a)((function(){return Object(u.a)({exitfab:{position:"absolute",bottom:"2rem",right:"2rem","&:hover":{backgroundColor:"#6666ff"}}})})),pe=function(e){var t=e.cfmOpen,n=void 0!==t&&t,c=e.setCfmOpen,a=void 0===c?function(){}:c,r=e.onClick,i=void 0===r?function(){}:r,s=e.clickOK,o=void 0===s?function(){}:s,l=xe();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(be.a,{className:l.exitfab,onClick:i,color:"primary","aria-label":"exit",children:Object(P.jsx)(me.a,{})}),n?Object(P.jsx)(he,{cfmOpen:n,title:"Attention!",msg:"\u30a2\u30d7\u30ea\u304b\u3089\u9000\u51fa\u3057\u307e\u3059\u3002\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002\u3088\u308d\u3057\u3044\u3067\u3057\u3087\u3046\u304b\uff1f",clickOK:o,clickNG:function(){return a(!1)}}):null]})},ge=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(o.g)(),i=Object(c.useCallback)((function(){a(!0)}),[]),s=Object(c.useCallback)((function(){r.push("/")}),[]);return Object(P.jsx)(pe,{cfmOpen:n,setCfmOpen:a,onClick:i,clickOK:s})},ve=n(133),Ce=n(261),ye=n(263),we=n(262),ke=n(264),Ne=n(22),Se=n.n(Ne),Fe=n(265),Pe=Object(l.a)((function(){return Object(u.a)({cardCommon:{height:"100%",display:"grid",gridTemplateRows:"3% 10% 3% 68% 3% 10% 3%"},header:{gridRow:2},contentCommon:{display:"grid",gridTemplateRows:"100%",gridRow:4},content:{gridRow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"auto",height:"100%"},media:{height:0,paddingTop:"100%",width:"100%",objectFit:"cover"},button:{width:"100%",height:"100%"},upload:{gridRow:6}})})),Ee=function(e){var t=Pe(),n=e.getRootProps,c=void 0===n?function(){}:n,r=e.getInputProps,i=void 0===r?function(){}:r,s=e.myFiles,o=void 0===s?[]:s,l=e.src,u=void 0===l?"":l,d=e.clickable,b=void 0!==d&&d,m=e.handleUpload,f=void 0===m?function(){}:m,h=e.title,x=void 0===h?"\u7121\u984c":h,p=e.handleTitleChange,g=void 0===p?function(){}:p,v=e.header,C=void 0===v?"\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044":v,y=e.subHeader,w=void 0===y?"\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u306f\u300cJpeg\u300d\u300cJpg\u300d\u300cPng\u300d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002":y;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:Object(P.jsxs)(Ce.a,{className:t.cardCommon,children:[Object(P.jsx)(we.a,{className:t.header,title:C,subheader:w}),Object(P.jsx)(ye.a,{className:t.contentCommon,children:Object(P.jsxs)(j.a,Object(O.a)(Object(O.a)({},c()),{},{className:t.content,children:[Object(P.jsx)("input",Object(O.a)({},i())),0===o.length?Object(P.jsx)(A.a,{className:t.button,color:"secondary",fullWidth:!0,autoFocus:!0,children:"Drag&Drop your images here"}):Object(P.jsx)(j.a,{className:t.content,children:o.map((function(e){return Object(P.jsx)(a.a.Fragment,{children:u&&Object(P.jsx)("img",{src:u,className:t.content})},e.name)}))})]}))}),Object(P.jsxs)(ke.a,{className:t.upload,children:[0!==o.length?Object(P.jsx)(D.a,{label:"\u30bf\u30a4\u30c8\u30eb",fullWidth:!0,id:"title",type:"text",value:x,onChange:g}):null,Object(P.jsx)(A.a,{className:t.button,disabled:!b,type:"submit",variant:"contained",color:"secondary",fullWidth:!0,style:{marginTop:"16px"},onClick:function(){return f(o)},children:"UPLOAD"})]})]})}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:Object(P.jsxs)(Ce.a,{className:t.cardCommon,children:[Object(P.jsx)(we.a,{className:t.header,title:C,subheader:w}),Object(P.jsx)(ye.a,{className:t.contentCommon,children:Object(P.jsxs)(j.a,Object(O.a)(Object(O.a)({},c()),{},{className:t.content,children:[Object(P.jsx)("input",Object(O.a)({},i())),0===o.length?Object(P.jsx)(A.a,{className:t.button,color:"secondary",fullWidth:!0,autoFocus:!0,children:"Drag&Drop your images here"}):Object(P.jsx)(Fe.a,{image:u,className:t.media})]}))}),Object(P.jsxs)(ke.a,{className:t.upload,children:[0!==o.length?Object(P.jsx)(D.a,{label:"\u30bf\u30a4\u30c8\u30eb",fullWidth:!0,id:"title",type:"text",value:x,onChange:g}):null,Object(P.jsx)(A.a,{className:t.button,disabled:!b,type:"submit",variant:"contained",color:"secondary",fullWidth:!0,style:{marginTop:"5px"},onClick:function(){return f(o)},children:"UPLOAD"})]})]})})]})},Te=function(e){var t=e.setIsUpd,n=Object(c.useState)([]),a=Object(f.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(!1),o=Object(f.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(""),d=Object(f.a)(j,2),O=d[0],h=d[1],C=Object(c.useState)("\u7121\u984c"),y=Object(f.a)(C,2),w=y[0],k=y[1],N=Object(c.useContext)(q).user,S=Object(c.useState)("\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044"),F=Object(f.a)(S,2),E=F[0],T=F[1],I=Object(c.useState)("\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u306f\u300cJpeg\u300d\u300cJpg\u300d\u300cPng\u300d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),R=Object(f.a)(I,2),U=R[0],M=R[1],D=Object(c.useCallback)(function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[0]){e.next=2;break}return e.abrupt("return");case 2:try{i(Object(v.a)(t)),u(!0),L(t)}catch(G){alert(G)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),A=Object(ve.a)({onDrop:D,onDropRejected:function(){alert("\u753b\u50cf\u306e\u307f\u53d7\u3051\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002")}}),K=A.getRootProps,B=A.getInputProps,z=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=g.ref("/images/".concat(r[0].name)),n.put(r[0]).on(x.storage.TaskEvent.STATE_CHANGED,V,G)}catch(G){console.log("\u30a8\u30e9\u30fc\u30ad\u30e3\u30c3\u30c1",G)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ref("/images/".concat(r[0].name)).getDownloadURL();case 2:""!==(t=e.sent)&&N&&p.collection("images").doc().set({title:w,imageUrl:t,screenName:N.screenName,displayName:N.displayName,iconUrl:N.photoUrl,createdAt:x.firestore.FieldValue.serverTimestamp()});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var n=e.bytesTransferred/e.totalBytes*100;console.log(n+"% done"),console.log(e),100===n&&(W(),u(!1),t(!0),T("\u753b\u50cf\u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3057\u305f\uff01"),M("\u5236\u9650\u6642\u9593\u304c\u7d42\u308f\u308b\u3068\u81ea\u52d5\u7684\u306b\u95b2\u89a7\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u5236\u9650\u6642\u9593\u304c\u7d42\u308f\u308b\u307e\u3067\u4eca\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002"))},G=function(e){alert(e)},L=function(e){if(null!==e){var t=e[0];if(null!==t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){h(n.result)}}}};return Object(P.jsx)(Ee,{getRootProps:K,getInputProps:B,myFiles:r,src:O,clickable:l,handleUpload:z,title:w,handleTitleChange:function(e){k(e.target.value)},header:E,subHeader:U})},Ie=Object(l.a)((function(){return Object(u.a)({timerDisp:{gridRow:2,gridColumn:2,height:"100%"},uploadCommon:{gridRow:4,gridColumn:2,height:"100%"}})})),Re=function(e){var t=Ie(),n=e.setTimerEnd,c=e.setIsUpd;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(j.a,{className:t.timerDisp,children:Object(P.jsx)(de,{setTimerEnd:n})}),Object(P.jsx)(j.a,{className:t.uploadCommon,children:Object(P.jsx)(Te,{setIsUpd:c})}),Object(P.jsx)(ge,{})]})},Ue=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(f.a)(r,2),s=i[0],l=i[1],u=Object(o.g)();return Object(c.useEffect)((function(){n&&s&&u.push("dispPicture")})),Object(P.jsx)(Re,{setTimerEnd:a,setIsUpd:l})},Me=Object(l.a)((function(){return Object(u.a)({rootPC:{display:"grid",gridTemplateRows:"5% 10% 5% 75% 5%",gridTemplateColumns:"3% 94% 3%",height:"calc(100vh - 70px)"},rootPhone:{display:"grid",gridTemplateRows:"2% 16% 2% 78% 2%",gridTemplateColumns:"3% 94% 3%",height:"calc(100vh - 70px)"}})})),De=function(){var e=Me();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:Object(P.jsx)(j.a,{className:e.rootPC,children:Object(P.jsx)(Ue,{})})}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:Object(P.jsx)(j.a,{className:e.rootPhone,children:Object(P.jsx)(Ue,{})})})]})},Ae="users",Ke="docCounters",Be="favoriteUsers",ze="favoriteNum",qe="favCounters",We=n(47),Ve=n.n(We),Ge=n(266),Le=n(72),_e=n.n(Le),He=Object(l.a)((function(){return Object(u.a)({rootPC:{minWidth:345},rootPhone:{minWidth:70},media:{height:0,paddingTop:"100%",width:"100%",objectFit:"cover"},button:{color:"#f50057"},iconButton:{"&:hover":{backgroundColor:"#ffb7db"}}})})),Je=function(e){var t=e.image,n=e.handleFavClick,c=void 0===n?function(){}:n,a=e.isFav,r=void 0!==a&&a,i=e.isDisabled,s=void 0!==i&&i,o=e.favCount,l=void 0===o?0:o,u=He();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:Object(P.jsxs)(Ce.a,{className:u.rootPC,children:[t.iconUrl?Object(P.jsx)(we.a,{avatar:Object(P.jsx)(S.a,{src:t.iconUrl}),title:t.title,subheader:t.displayName}):Object(P.jsx)(we.a,{avatar:Object(P.jsx)(Ve.a,{}),title:t.title,subheader:t.displayName}),Object(P.jsx)(Fe.a,{className:u.media,image:t.imageUrl}),Object(P.jsxs)(ke.a,{children:[Object(P.jsx)(Ge.a,{"aria-label":"add to favorites",className:u.iconButton,onClick:c,disabled:s,children:r?Object(P.jsx)(_e.a,{className:u.button}):Object(P.jsx)(_e.a,{})}),0===l?null:Object(P.jsx)(F.a,{children:l})]})]})}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:Object(P.jsxs)(Ce.a,{className:u.rootPhone,children:[t.iconUrl?Object(P.jsx)(we.a,{avatar:Object(P.jsx)(S.a,{src:t.iconUrl}),title:t.title,subheader:t.displayName}):Object(P.jsx)(we.a,{avatar:Object(P.jsx)(Ve.a,{}),title:t.title,subheader:t.displayName}),Object(P.jsx)(Fe.a,{className:u.media,image:t.imageUrl}),Object(P.jsxs)(ke.a,{children:[Object(P.jsx)(Ge.a,{"aria-label":"add to favorites",className:u.iconButton,onClick:c,disabled:s,children:r?Object(P.jsx)(_e.a,{className:u.button}):Object(P.jsx)(_e.a,{})}),0===l?null:Object(P.jsx)(F.a,{children:l})]})]})})]})},Qe=function(e){var t=e.image,n=e.favNum,a=e.setFavNum,r=Object(c.useState)(!1),i=Object(f.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)(!1),u=Object(f.a)(l,2),j=u[0],d=u[1],O=Object(c.useState)(0),h=Object(f.a)(O,2),g=h[0],v=h[1],C=Object(c.useContext)(q).user,y=function(){var e=Object(m.a)(b.a.mark((function e(){var n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.batch(),!t.id||!C){e.next=8;break}return c=p.collection("images").doc(t.id).collection(Be).doc(C.screenName),n.set(c,{user:C.displayName}),a=p.collection("images").doc(t.id).collection(ze).doc(qe),n.set(a,{count:x.firestore.FieldValue.increment(1)},{merge:!0}),e.next=8,n.commit();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(b.a.mark((function e(){var n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.batch(),!t.id||!C){e.next=8;break}return c=p.collection("images").doc(t.id).collection(Be).doc(C.screenName),n.delete(c),a=p.collection("images").doc(t.id).collection(ze).doc(qe),n.set(a,{count:x.firestore.FieldValue.increment(-1)},{merge:!0}),e.next=8,n.commit();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e,n=!1,c=function(){var e=Object(m.a)(b.a.mark((function e(){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.collection("images").doc(t.id).collection(ze).doc("favCounters"),e.next=3,c.get().then((function(e){var t=e.data();n||v(t?t.count:0)})).catch((function(e){console.log("Error getting document",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e=function t(){return c(),window.setTimeout((function(){e=t()}),5e3)}(),function(){n=!0,clearTimeout(e)}}),[v]),Object(c.useEffect)((function(){d(n<=0&&!s)}),[s,n]),Object(P.jsx)(Je,{image:t,handleFavClick:function(){s?(a((function(e){return e+1})),w()):(a((function(e){return e-1})),y()),o((function(e){return!e}))},isFav:s,isDisabled:j,favCount:g})},Xe=Object(l.a)((function(){return Object(u.a)({exitfab:{position:"absolute",bottom:"2rem",right:"2rem","&:hover":{backgroundColor:"#6666ff"}}})})),Ye=function(e){var t=e.cfmOpen,n=void 0!==t&&t,c=e.setCfmOpen,a=void 0===c?function(){}:c,r=e.onClick,i=void 0===r?function(){}:r,s=e.clickOK,o=void 0===s?function(){}:s,l=Xe();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(be.a,{className:l.exitfab,onClick:i,color:"primary","aria-label":"exit",children:Object(P.jsx)(me.a,{})}),n?Object(P.jsx)(he,{cfmOpen:n,title:"Attention!",msg:"\u30a2\u30d7\u30ea\u304b\u3089\u9000\u51fa\u3057\u307e\u3059\u3002\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002\u3088\u308d\u3057\u3044\u3067\u3057\u3087\u3046\u304b\uff1f",clickOK:o,clickNG:function(){return a(!1)}}):null]})},Ze=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(o.g)(),i=Object(c.useCallback)((function(){a(!0)}),[]),s=Object(c.useCallback)((function(){r.push("/")}),[]);return Object(P.jsx)(Ye,{cfmOpen:n,setCfmOpen:a,onClick:i,clickOK:s})},$e=Object(l.a)((function(){return Object(u.a)({commonPC:{marginTop:"30px"},commonPhone:{marginTop:"5px"},countfab:{position:"absolute",bottom:"2rem",left:"2rem"}})})),et=function(e){var t=e.images,n=void 0===t?null:t,c=e.favNum,a=void 0===c?0:c,r=e.setFavNum,i=void 0===r?function(){}:r,s=$e();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:n?Object(v.a)(Array(n.length)).map((function(e,t){return Object(P.jsx)(j.a,{className:s.commonPC,children:Object(P.jsx)(Qe,{image:n[t],favNum:a,setFavNum:i})},"images_".concat(t))})):null}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:n?Object(v.a)(Array(n.length)).map((function(e,t){return Object(P.jsx)(j.a,{className:s.commonPhone,children:Object(P.jsx)(Qe,{image:n[t],favNum:a,setFavNum:i})},"images_".concat(t))})):null}),Object(P.jsx)(Ze,{}),Object(P.jsx)(be.a,{className:s.countfab,color:"secondary","aria-label":"count",disabled:0===a,children:a})]})},tt=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(2),i=Object(f.a)(r,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){var e=!1;return function(){var t=Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.collection("images"),t.next=3,n.orderBy("createdAt").get().then((function(t){var n=[];t.forEach((function(e){n.push(Object(O.a)({id:e.id},e.data()))})),e||a(n)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[]),Object(P.jsx)(et,{images:n,favNum:s,setFavNum:o})},nt=Object(l.a)((function(){return Object(u.a)({clockStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",padding:"1em"},clockStyleDanger:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",padding:"1em",color:"#ff1744"},exitfab:{position:"absolute",bottom:"2rem",right:"2rem","&:hover":{backgroundColor:"#6666ff"}}})})),ct=function(e){var t=e.tmMinutes,n=void 0===t?"":t,c=e.tmSeconds,a=void 0===c?"":c,r=e.danger,i=void 0!==r&&r,s=e.isEnd,o=void 0!==s&&s,l=e.clickOK,u=void 0===l?function(){}:l,j=nt();return Object(P.jsxs)(P.Fragment,{children:[i?Object(P.jsx)(L.a,{className:j.clockStyleDanger,children:n&&a?n+"\u5206"+a+"\u79d2":null}):Object(P.jsx)(L.a,{className:j.clockStyle,children:n&&a?n+"\u5206"+a+"\u79d2":null}),o?Object(P.jsx)(Z,{infOpen:o,title:"\u95b2\u89a7\u6642\u9593\u306e\u7d42\u4e86\u3067\u3059",msg:"\u9577\u3044\u6642\u9593\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002\u7d50\u679c\u767a\u8868\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002",clickOK:u}):null]})},at=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(f.a)(r,2),s=i[0],l=i[1],u=Object(c.useState)(""),j=Object(f.a)(u,2),d=j[0],O=j[1],h=Object(c.useState)(!1),x=Object(f.a)(h,2),p=x[0],g=x[1],v=Object(c.useState)(!1),C=Object(f.a)(v,2),y=C[0],w=C[1],k=Object(o.g)();Object(c.useEffect)((function(){G()().startOf("day");var e=G()().add(30,"seconds");a(e)}),[a]);var N=Object(c.useCallback)(Object(m.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=G()(),n&&(c=n.diff(t,"second"),l(String(Math.floor(c/60))),O(String(c%60)),0===c&&w(!0),Math.floor(c/60)<1&&g(!0));case 2:case"end":return e.stop()}}),e)}))),[n]);Object(c.useEffect)((function(){if(!y){var e=setInterval(N,500);return N(),function(){clearInterval(e)}}}),[N,y]);var S=Object(c.useCallback)((function(){k.push("/")}),[]);return Object(P.jsx)(ct,{tmMinutes:s,tmSeconds:d,danger:p,isEnd:y,clickOK:S})},rt=Object(l.a)((function(){return Object(u.a)({root:{display:"grid",gridTemplateRows:"3% 10% 3% 81% "},timer:{margin:"1em"},dispPictureCommon:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",paddingTop:"0.5%",paddingLeft:"0.5%",paddingRight:"0.5%"}})})),it=function(){var e=rt();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(j.a,{className:e.timer,children:Object(P.jsx)(at,{})}),Object(P.jsx)(j.a,{className:e.dispPictureCommon,children:Object(P.jsx)(tt,{})})]})},st=function(){return Object(P.jsx)(it,{})},ot=function(){return Object(P.jsx)(st,{})},lt=Object(l.a)((function(){return Object(u.a)({msgStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",padding:"1.5rem"},msgStyleMax:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.5em",color:"#ff1744"}})})),ut=function(e){var t=e.isMax,n=void 0!==t&&t,c=e.msg,a=void 0===c?"":c,r=lt();return Object(P.jsx)(P.Fragment,{children:n?Object(P.jsx)(L.a,{className:r.msgStyleMax,children:a}):Object(P.jsx)(L.a,{className:r.msgStyle,children:a})})},jt=function(e){var t=e.isMax,n=Object(c.useState)(""),a=Object(f.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){i(t?"\u4e0a\u9650\u4eba\u6570\u306b\u9054\u3057\u307e\u3057\u305f\u3002":"\u30ed\u30b0\u30a4\u30f3\u3092\u884c\u3063\u3066\u30a8\u30f3\u30c8\u30ea\u30fc\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u53c2\u52a0\u3067\u304d\u307e\u3059\u3002")}),[i,t]),Object(P.jsx)(ut,{isMax:t,msg:r})},dt=n(279),bt=n(103),Ot=n.n(bt),mt=n(102),ft=n.n(mt),ht=n(125),xt=n.n(ht),pt=n(126),gt=Object(pt.autoPlay)(xt.a),vt=Object(l.a)((function(e){return Object(u.a)({commonPC:{width:500,height:"100%"},commonPhone:{width:"100%",height:"100%",alignItems:"center"},imgBoxPC:{display:"flex",alignItems:"center"},imgPC:{maxHeight:450,display:"block",maxWidth:"100%",objectFit:"cover"},imgPhone:{maxHeight:300,display:"block",width:"100%",objectFit:"cover"},button:{width:"100%"}})})),Ct=function(e){var t=e.images,n=void 0===t?null:t,c=e.activeStep,a=void 0===c?0:c,r=e.maxSteps,i=void 0===r?0:r,s=e.handleNext,o=void 0===s?function(){}:s,l=e.handleBack,u=void 0===l?function(){}:l,j=e.handleStepChange,d=void 0===j?function(){}:j,b=e.image,O=void 0===b?null:b,m=vt();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:n&&O?Object(P.jsxs)(Ce.a,{className:m.commonPC,children:[O.iconUrl?Object(P.jsx)(we.a,{avatar:Object(P.jsx)(S.a,{src:O.iconUrl}),title:O.title,subheader:O.displayName}):Object(P.jsx)(we.a,{avatar:Object(P.jsx)(Ve.a,{}),title:O.title,subheader:O.displayName}),Object(P.jsx)(ye.a,{children:Object(P.jsx)(gt,{axis:"x-reverse",index:a,onChangeIndex:d,enableMouseEvents:!0,children:n.map((function(e,t){return Object(P.jsx)("div",{children:Math.abs(a-t)<=2?Object(P.jsx)("img",{className:m.imgPC,src:e.imageUrl}):null},t)}))})}),Object(P.jsx)(dt.a,{steps:i,position:"static",variant:"text",activeStep:a,nextButton:Object(P.jsxs)(A.a,{size:"small",onClick:o,disabled:a===i-1,children:["Next",Object(P.jsx)(ft.a,{})]}),backButton:Object(P.jsxs)(A.a,{size:"small",onClick:u,disabled:0===a,children:[Object(P.jsx)(Ot.a,{}),"Back"]})})]}):null}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:n&&O?Object(P.jsxs)(Ce.a,{className:m.commonPhone,children:[O.iconUrl?Object(P.jsx)(we.a,{avatar:Object(P.jsx)(S.a,{src:O.iconUrl}),title:O.title,subheader:O.displayName}):Object(P.jsx)(we.a,{avatar:Object(P.jsx)(Ve.a,{}),title:O.title,subheader:O.displayName}),Object(P.jsx)(ye.a,{children:Object(P.jsx)(gt,{axis:"x-reverse",index:a,onChangeIndex:d,enableMouseEvents:!0,children:n.map((function(e,t){return Object(P.jsx)("div",{children:Math.abs(a-t)<=2?Object(P.jsx)("img",{className:m.imgPhone,src:e.imageUrl}):null},t)}))})}),Object(P.jsx)(ke.a,{children:Object(P.jsx)(dt.a,{className:m.button,steps:i,position:"static",variant:"text",activeStep:a,nextButton:Object(P.jsxs)(A.a,{size:"small",onClick:o,disabled:a===i-1,children:["Next",Object(P.jsx)(ft.a,{})]}),backButton:Object(P.jsxs)(A.a,{size:"small",onClick:u,disabled:0===a,children:[Object(P.jsx)(Ot.a,{}),"Back"]})})})]}):null})]})},yt=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(0),i=Object(f.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)(0),u=Object(f.a)(l,2),j=u[0],d=u[1],h=Object(c.useState)(null),x=Object(f.a)(h,2),g=x[0],v=x[1];Object(c.useEffect)((function(){var e=!1;return function(){var t=Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.collection("images"),t.next=3,n.orderBy("createdAt").get().then((function(t){var n=[];t.forEach((function(e){n.push(Object(O.a)({id:e.id},e.data()))})),!e&&n&&(a(n),d(n.length))}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[]);return Object(c.useEffect)((function(){n&&v(n[s])}),[n,s]),Object(P.jsx)(Ct,{images:n,activeStep:s,maxSteps:j,handleNext:function(){o((function(e){return e+1}))},handleBack:function(){o((function(e){return e-1}))},handleStepChange:function(e){o(e)},image:g})},wt=Object(l.a)((function(){return Object(u.a)({button:{width:"70%",height:"75%"}})})),kt=function(e){var t=e.infOpen,n=void 0!==t&&t,c=e.setInfOpen,a=void 0===c?function(){}:c,r=e.entryClick,i=void 0===r?function(){}:r,s=e.isMax,o=void 0!==s&&s,l=e.disabled,u=void 0===l||l,j=wt();return Object(P.jsxs)(P.Fragment,{children:[u?null:Object(P.jsx)(A.a,{className:j.button,onClick:i,variant:"outlined",color:"primary",disabled:o,children:"\u30a8\u30f3\u30c8\u30ea\u30fc"}),n?Object(P.jsx)(Z,{infOpen:n,title:"\u4e0a\u9650\u4eba\u6570\u306b\u9054\u3057\u307e\u3057\u305f",msg:"\u6b21\u56de\u306e\u958b\u50ac\u307e\u3067\u304a\u5f85\u3061\u304f\u3060\u3055\u3044",clickOK:function(){return a(!1)}}):null]})},Nt=function(e){var t=e.isMax,n=e.setIsMax,a=Object(c.useState)(!1),r=Object(f.a)(a,2),i=r[0],s=r[1],l=Object(o.g)(),u=Object(c.useContext)(q).user,j=Object(c.useState)(!0),d=Object(f.a)(j,2),O=d[0],h=d[1];Object(c.useEffect)((function(){h(!u)}),[u]);var g=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(20!==t){e.next=5;break}return e.next=3,p.collection("entryMembers").doc("entryNumber").set({numbers:x.firestore.FieldValue.increment(1),maximum:!0});case 3:e.next=7;break;case 5:return e.next=7,p.collection("entryMembers").doc("entryNumber").set({numbers:x.firestore.FieldValue.increment(1),maximum:!1},{merge:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,c=p.collection("entryMembers").doc("entryNumber"),e.next=4,c.get().then((function(e){if(e.exists){var c=e.data();c.maximum?t||(s(!0),n(!0)):(g(c.numbers),l.push("/chat"))}else g(0),l.push("/chat")})).catch((function(e){console.log("Error getting document",e)}));case 4:return e.abrupt("return",(function(){t=!0}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=Object(c.useCallback)((function(){v()}),[]);return Object(P.jsx)(kt,{infOpen:i,setInfOpen:s,entryClick:C,isMax:t,disabled:O})},St=n(127),Ft=n.n(St),Pt=Object(l.a)((function(){return Object(u.a)({title:{display:"flex",justifyContent:"center",alignItems:"center"}})})),Et=function(e){var t=e.uiConfig,n=e.auth,c=void 0===n?null:n,a=e.open,r=void 0!==a&&a,i=e.onClose,s=void 0===i?function(){}:i,o=Pt();return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(_.a,{open:r,onClose:s,"aria-labelledby":"form-dialog-title",fullWidth:!0,children:[Object(P.jsx)(H.a,{className:o.title,children:"\u30ed\u30b0\u30a4\u30f3 / \u65b0\u898f\u767b\u9332"}),Object(P.jsxs)(J.a,{children:[Object(P.jsx)(Ft.a,{uiConfig:t,firebaseAuth:c}),Object(P.jsxs)(Q.a,{children:[Object(P.jsx)(F.a,{children:"\u30a8\u30f3\u30c8\u30ea\u30fc\u3059\u308b\u305f\u3081\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3059\u3002"}),Object(P.jsx)(F.a,{children:"\u306a\u304a\u3001\u3053\u306e\u30a2\u30d7\u30ea\u306f\u30e6\u30fc\u30b6\u30fc\u306e\u8a31\u53ef\u306a\u304fTwitter\u306b\u6295\u7a3f\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002"})]})]}),Object(P.jsx)(X.a,{children:Object(P.jsx)(A.a,{onClick:s,color:"primary",children:"\u623b\u308b"})})]})})},Tt=function(e){var t=e.open,n=e.onClose,a=Object(c.useContext)(z).auth,r=Object(c.useContext)(q).setCredential,i=Object(o.g)(),s={signInFlow:"redirect",signInOptions:[{provider:h.a.auth.TwitterAuthProvider.PROVIDER_ID,customParameters:{lang:"ja"}}],callbacks:{signInFailure:function(e){console.log(e)},signInSuccessWithAuthResult:function(e,t){r(e);var n=t||"/home";return i.replace(n),!1}}};return Object(P.jsx)(Et,{uiConfig:s,auth:a,open:t,onClose:n})},It=Object(l.a)((function(){return Object(u.a)({button:{width:"70%",height:"75%"}})})),Rt=function(e){var t=e.loginClick,n=void 0===t?function(){}:t,c=e.open,a=void 0!==c&&c,r=e.onClose,i=void 0===r?function(){}:r,s=e.disabled,o=void 0!==s&&s,l=It();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(A.a,{className:l.button,onClick:n,variant:"outlined",color:"primary",disabled:o,children:o?"\u30ed\u30b0\u30a4\u30f3\u6e08":"\u30ed\u30b0\u30a4\u30f3"}),Object(P.jsx)(Tt,{open:a,onClose:i})]})},Ut=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(f.a)(r,2),s=i[0],o=i[1],l=Object(c.useContext)(q).user;Object(c.useEffect)((function(){o(!!l)}),[l]);var u=Object(c.useCallback)((function(){a(!0)}),[]);return Object(P.jsx)(Rt,{loginClick:u,open:n,onClose:function(){a(!1)},disabled:s})},Mt=Object(l.a)((function(){return Object(u.a)({msgDisp:{gridRow:2,gridColumn:2,height:"100%"},dispCommonPC:{display:"grid",gridTemplateColumns:"50% 50%",gridTemplateRows:"100%",gridRow:4,gridColumn:2},picDispPC:{gridRow:1,gridColumn:1,height:"100%"},picDispPhone:{gridRow:4,gridColumn:2,height:"100%"},buttonBoxPC:{justifyContent:"center",gridRow:1,gridColumn:2,display:"grid",width:"100%",gridTemplateColumns:"100%",gridTemplateRows:"12% 35% 6% 35% 12%"},buttonBoxPhone:{justifyContent:"center",gridRow:6,gridColumn:2,display:"grid",gridTemplateColumns:"40% 20% 40%"},entryPC:{gridRow:2,width:"100%"},entryPhone:{gridColumn:1},loginPC:{gridRow:4,width:"100%"},loginPhone:{gridColumn:3}})})),Dt=function(e){var t=e.isMax,n=void 0!==t&&t,c=e.setIsMax,a=void 0===c?function(){}:c,r=Mt();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(Se.a,{query:"(min-width:767px)",children:[Object(P.jsx)(j.a,{className:r.msgDisp,children:Object(P.jsx)(jt,{isMax:n})}),Object(P.jsxs)(j.a,{className:r.dispCommonPC,children:[Object(P.jsx)(j.a,{className:r.picDispPC,children:Object(P.jsx)(yt,{})}),Object(P.jsxs)(j.a,{className:r.buttonBoxPC,children:[Object(P.jsx)(j.a,{className:r.entryPC,children:Object(P.jsx)(Nt,{isMax:n,setIsMax:a})}),Object(P.jsx)(j.a,{className:r.loginPC,children:Object(P.jsx)(Ut,{})})]})]})]}),Object(P.jsxs)(Se.a,{query:"(max-width:767px)",children:[Object(P.jsx)(j.a,{className:r.msgDisp,children:Object(P.jsx)(jt,{isMax:n})}),Object(P.jsx)(j.a,{className:r.picDispPhone,children:Object(P.jsx)(yt,{})}),Object(P.jsxs)(j.a,{className:r.buttonBoxPhone,children:[Object(P.jsx)(j.a,{className:r.entryPhone,children:Object(P.jsx)(Nt,{isMax:n,setIsMax:a})}),Object(P.jsx)(j.a,{className:r.loginPhone,children:Object(P.jsx)(Ut,{})})]})]})]})},At=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=p.collection("entryMembers").doc("entryNumber"),e.next=4,n.get().then((function(e){t||(e.exists&&e.data().maximum?a(!0):a(!1))})).catch((function(e){console.log("Error getting document",e)}));case 4:return e.abrupt("return",(function(){t=!0}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),Object(P.jsx)(Dt,{isMax:n,setIsMax:a})},Kt=Object(l.a)((function(){return Object(u.a)({rootPC:{display:"grid",gridTemplateRows:"3% 7% 3% 84% 3%",gridTemplateColumns:"10% 80% 10%",height:"calc(100vh - 70px)"},rootPhone:{display:"grid",gridTemplateRows:"3% 7% 3% 71% 3% 10% 3%",gridTemplateColumns:"10% 80% 10%",height:"calc(100vh - 70px)"}})})),Bt=function(){var e=Kt();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:Object(P.jsx)(j.a,{className:e.rootPC,children:Object(P.jsx)(At,{})})}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:Object(P.jsx)(j.a,{className:e.rootPhone,children:Object(P.jsx)(At,{})})})]})},zt=n(267),qt=n(268),Wt=n(132),Vt=n(278),Gt=Object(l.a)((function(){return Object(u.a)({root:{flexGrow:1}})})),Lt=function(e){var t=e.user,n=void 0===t?null:t,c=e.isLogined,a=void 0!==c&&c,r=e.handleMenu,i=void 0===r?function(){}:r,s=e.anchorEl,o=void 0===s?null:s,l=e.menuOpen,u=void 0!==l&&l,j=e.handleClose,d=void 0===j?function(){}:j,b=e.signOut,O=void 0===b?function(){}:b,m=e.dialogOpen,f=void 0!==m&&m,h=e.setDialogOpen,x=void 0===h?function(){}:h,p=e.loginClick,g=void 0===p?function(){}:p,v=Gt();return Object(P.jsxs)("div",{className:v.root,children:[Object(P.jsx)(zt.a,{position:"static",children:Object(P.jsxs)(qt.a,{children:[Object(P.jsx)(Ge.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:i,color:"inherit",children:n&&n.photoUrl&&a?Object(P.jsx)(S.a,{src:n.photoUrl}):Object(P.jsx)(Ve.a,{})}),Object(P.jsx)(Wt.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:d,children:a?Object(P.jsx)(Vt.a,{onClick:O,children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}):Object(P.jsx)(Vt.a,{onClick:g,children:"\u30ed\u30b0\u30a4\u30f3"})})]})}),Object(P.jsx)(Tt,{open:f,onClose:function(){return x(!1)}})]})},_t=function(){var e=Object(c.useContext)(z).auth,t=Object(c.useContext)(q).user,n=Object(c.useState)(!1),a=Object(f.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(null),l=Object(f.a)(s,2),u=l[0],j=l[1],d=Object(c.useState)(!1),b=Object(f.a)(d,2),O=b[0],m=b[1],h=Object(o.g)(),x=Boolean(u),p=e&&t?function(){j(null),e.signOut(),h.replace("/home")}:function(){};return Object(c.useEffect)((function(){i(!!t)}),[t]),Object(P.jsx)(Lt,{user:t,isLogined:r,handleMenu:function(e){j(u?null:e.currentTarget)},anchorEl:u,menuOpen:x,handleClose:function(){j(null)},signOut:p,dialogOpen:O,setDialogOpen:m,loginClick:function(){j(null),m(!0)}})},Ht=function(){return Object(P.jsx)(_t,{})},Jt=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(s.a,{}),Object(P.jsx)(Ht,{}),Object(P.jsxs)(o.d,{children:[Object(P.jsx)(o.b,{path:["/","/home"],exact:!0,component:Bt}),Object(P.jsx)(o.b,{path:"/chat",exact:!0,component:le}),Object(P.jsx)(o.b,{path:"/upload",exact:!0,component:De}),Object(P.jsx)(o.b,{path:"/dispPicture",exact:!0,component:ot}),Object(P.jsx)(o.a,{to:"/"})]})]})},Qt=n(51),Xt=n(270),Yt=(n(122),function(){var e=Object(m.a)(b.a.mark((function e(t,n){var c,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null,e.next=3,t.collection(Ae).doc(n).get();case 3:return(a=e.sent).exists&&(r=a.data(),c=Object(O.a)(Object(O.a)({},r),{},{id:a.id})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Zt=n(129),$t=n(130),en={screenName:"",displayName:null,description:null,photoUrl:null,provider:"twitter",providerUid:"",createdAt:null,updatedAt:null},tn=function(){var e=Object(m.a)(b.a.mark((function e(t,n,c){var a,r,i,s,o,l,u,j,d,m,f,x,p,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.uid,r=n.displayName,i=n.photoURL,s="",o="",l="",c.additionalUserInfo&&(c.additionalUserInfo.username&&(o=c.additionalUserInfo.username),c.additionalUserInfo.profile&&(s=c.additionalUserInfo.profile.id_str,l=c.additionalUserInfo.profile.description||"")),s&&o){e.next=9;break}throw new Error("Invalid credential information.");case 9:return e.next=11,t.collection(Ae).where("screenName","==",o).get();case 11:return e.sent.size&&(u=Math.floor(1e4*Math.random()),o="".concat(o).concat(Object($t.sprintf)("%04d",u))),j=null,d=t.batch(),e.next=17,t.collection(Ae).doc(a).get();case 17:return(m=e.sent).exists?(f=m.data(),x={},f.description!==l&&(x.description=l),f.displayName!==r&&(x.displayName=r),f.photoUrl!==i&&(x.photoUrl=i),Object(Zt.isEmpty)(x)||d.update(m.ref,Object(O.a)(Object(O.a)({},x),{},{updatedAt:h.a.firestore.FieldValue.serverTimestamp()})),j=Object(O.a)(Object(O.a)(Object(O.a)({},x),f),{},{id:m.id})):(p=Object(O.a)(Object(O.a)({},en),{},{providerUid:s,screenName:o,displayName:r,description:l,photoUrl:i}),d.set(m.ref,Object(O.a)(Object(O.a)({},p),{},{createdAt:h.a.firestore.FieldValue.serverTimestamp(),updatedAt:h.a.firestore.FieldValue.serverTimestamp()})),j=Object(O.a)(Object(O.a)({},p),{},{id:m.id}),g=t.collection(Ke).doc(Ae),d.set(g,{count:h.a.firestore.FieldValue.increment(1),updatedAt:h.a.firestore.FieldValue.serverTimestamp()},{merge:!0})),e.next=21,d.commit();case 21:return e.abrupt("return",j);case 22:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),nn=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(f.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(null),o=Object(f.a)(s,2),l=o[0],u=o[1],j=Object(c.useRef)(0),d=h.a.auth(),O=h.a.firestore(),x=d.onAuthStateChanged(function(){var e=Object(m.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}if(1!==j.current||!l){e.next=8;break}return e.next=4,tn(O,t,l);case 4:n=e.sent,i(n),e.next=13;break;case 8:if(r){e.next=13;break}return e.next=11,Yt(O,t.uid);case 11:c=e.sent,i(c);case 13:e.next=16;break;case 15:i(null);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(c.useEffect)((function(){return l&&(j.current+=1),x})),Object(P.jsx)(z.Provider,{value:{auth:d,db:O},children:Object(P.jsx)(q.Provider,{value:{user:r,credential:l,setCredential:u},children:t})})},cn=n(131),an=Object(cn.a)({palette:{primary:{main:"#009688"},secondary:{main:"#ff3d00"}}}),rn=Object(cn.a)({palette:{primary:{main:"#009688"},secondary:{main:"#ff3d00"}},typography:{fontSize:10}});i.a.render(Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Se.a,{query:"(min-width:767px)",children:Object(P.jsx)(Xt.a,{theme:an,children:Object(P.jsx)(Qt.a,{children:Object(P.jsx)(nn,{children:Object(P.jsx)(Jt,{})})})})}),Object(P.jsx)(Se.a,{query:"(max-width:767px)",children:Object(P.jsx)(Xt.a,{theme:rn,children:Object(P.jsx)(Qt.a,{children:Object(P.jsx)(nn,{children:Object(P.jsx)(Jt,{})})})})})]}),document.getElementById("root"))}},[[208,1,2]]]);
//# sourceMappingURL=main.7f351eaf.chunk.js.map